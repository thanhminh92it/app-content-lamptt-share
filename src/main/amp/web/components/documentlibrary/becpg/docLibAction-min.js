(function(){var a=Alfresco.util.isValueSet;YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCheckOutEntity",fn:function h(m){var k=m.displayName,l=new Alfresco.util.NodeRef(m.nodeRef);Alfresco.util.PopupManager.displayMessage({displayTime:0,effect:null,text:this.msg("message.checkout-entity.inprogress",k)});this.modules.actions.genericAction({success:{callback:{fn:function n(o){this.recordData.jsNode.setNodeRef(o.json.results[0].nodeRef);window.location.href=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details","entity-details")},scope:this}},failure:{message:this.msg("message.checkout-entity.failure",k)},webscript:{method:Alfresco.util.Ajax.POST,name:"checkout/node/{nodeRef}",params:{nodeRef:l.uri}}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCheckInEntity",fn:function b(n){var l=n.displayName,m=new Alfresco.util.NodeRef(n.nodeRef),k=n.version;if(n.workingCopy&&n.workingCopy.workingCopyVersion){k=n.workingCopy.workingCopyVersion}if(!this.newEntityVersion){this.newEntityVersion=Alfresco.module.getNewEntityVersionInstance()}this.newEntityVersion.show({filename:l,nodeRef:m,version:k,onNewEntityVersionComplete:{fn:function o(p){this.recordData.jsNode.setNodeRef(p.successful[0].nodeRef);window.location.href=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details","entity-details")},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCancelCheckOutEntity",fn:function f(n){var k=n.displayName,m=new Alfresco.util.NodeRef(n.nodeRef);this.modules.actions.genericAction({success:{callback:{fn:function l(q){var p=this.recordData.jsNode.nodeRef.nodeRef,o=q.json.results[0].nodeRef;this.recordData.jsNode.setNodeRef(o);window.location=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details","entity-details")+"#editCancelled";if(p==o){window.location.reload()}},scope:this}},failure:{message:this.msg("message.edit-cancel.failure",k)},webscript:{method:Alfresco.util.Ajax.POST,name:"cancel-checkout/node/{nodeRef}",params:{nodeRef:m.uri}}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionRefreshReport",fn:function i(l){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.please-wait")});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/entity/generate-report/node/"+l.nodeRef.replace(":/","")+"/force",successCallback:{fn:function m(n){this.recordData.jsNode.setNodeRef(l.nodeRef);window.location.href=this.getActionUrls(this.recordData).documentDetailsUrl.replace("document-details","entity-details")},scope:this},failureCallback:{fn:function k(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.failure")})},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionShowCharact",fn:function g(k){var l=a(k.location.site)?k.location.site.name:null;window.location.href=beCPG.util.entityCharactURL(l,k.nodeRef,k.node.type)}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionCompareEntity",fn:function g(l){var k=Alfresco.constants.PROXY_URI+"becpg/entity/compare/"+l.nodeRef.replace(":/","")+"/compare.pdf";this.modules.entityCompare=new Alfresco.module.SimpleDialog(this.id+"-entityCompare").setOptions({width:"33em",templateUrl:Alfresco.constants.URL_SERVICECONTEXT+"modules/entity-compare/entity-compare",actionUrl:k,validateOnSubmit:false,firstFocus:this.id+"-entityCompare-entities-field",doBeforeFormSubmit:{fn:function(n){this.modules.entityCompare.form.setAJAXSubmit(false);this.modules.entityCompare.hide();var m=YAHOO.util.Dom.get(this.id+"-entityCompare-reportTemplate");window.location.href=k+"?entities="+YAHOO.util.Dom.get(this.id+"-entityCompare-entities-added").value+"&tplNodeRef="+m.value},scope:this},});this.modules.entityCompare.show()}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionShowDocs",fn:function g(k){var l=a(k.location.site)?k.location.site.name:null;window.location.href=beCPG.util.entityDocumentsURL(l,k.location.path,k.location.file,true)}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionReportTplRefresh",fn:function c(m){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.please-wait")});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/report/reportTpl/"+m.nodeRef.replace(":/","")+"/refresh",successCallback:{fn:function k(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.success")})},scope:this},failureCallback:{fn:function l(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.generate-reports.failure")})},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionReportTplUpdatePermissions",fn:function d(m){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.update-permissions.please-wait")});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/report/reportTpl/"+m.nodeRef.replace(":/","")+"/updatePermissions",successCallback:{fn:function k(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.update-permissions.success")})},scope:this},failureCallback:{fn:function l(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.update-permissions.failure")})},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionEntityTplSynchronizeEntities",fn:function j(m){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.synchronize-entities.please-wait")});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/entity/entityTpl/"+m.nodeRef.replace(":/","")+"/synchronizeEntities",successCallback:{fn:function k(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.synchronize-entities.success")})},scope:this},failureCallback:{fn:function l(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.synchronize-entities.failure")})},scope:this}})}});YAHOO.Bubbling.fire("registerAction",{actionName:"onActionEntityTplFormulateEntities",fn:function e(l){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.formulate-entities.please-wait")});Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.GET,url:Alfresco.constants.PROXY_URI+"becpg/entity/entityTpl/"+l.nodeRef.replace(":/","")+"/formulateEntities",successCallback:{fn:function m(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.formulate-entities.success")})},scope:this},failureCallback:{fn:function k(n){Alfresco.util.PopupManager.displayMessage({text:this.msg("message.formulate-entities.failure")})},scope:this}})}})})();