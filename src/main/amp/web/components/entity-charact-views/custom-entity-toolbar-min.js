(function(){if(beCPG.component.EntityDataListToolbar){YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"entity-view-details",right:true,evaluate:function(b,a){return a!=null&&a.type!="bcpg:systemEntity"},fn:function(a){var b=beCPG.util.entityDetailsURL(this.options.siteId,this.options.entityNodeRef,this.entity.type);window.location.href=b}});YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"entity-view-documents",right:true,evaluate:function(b,a){return a!=null&&a.type!="bcpg:systemEntity"},fn:function(a){var b=beCPG.util.entityDocumentsURL(this.options.siteId,this.entity.path,this.entity.name);window.location.href=b}});YAHOO.Bubbling.fire("registerToolbarButtonAction",{right:true,actionName:"datalist-state",evaluate:function(b,a){return a!=null&&b.state!==null&&b.name.indexOf("WUsed")<0},createWidget:function(d,b){var c=document.createElement("div");d.appendChild(c);Dom.setAttribute(c,"id",b.id+"-stateCkeckbox");Dom.addClass(c,"stateCkeckbox");var a=new YAHOO.widget.Button({type:"checkbox",title:b.msg("button.datalist-state.description"),value:b.datalistMeta.state,container:c,disabled:!b.entity.userAccess.edit,checked:"Valid"==b.datalistMeta.state});a.on("checkedChange",function(){Alfresco.util.Ajax.request({method:Alfresco.util.Ajax.POST,url:Alfresco.constants.PROXY_URI+"becpg/entitylist/node/"+b.datalistMeta.nodeRef.replace(":/","")+"?state="+("Valid"==b.datalistMeta.state?"ToValidate":"Valid"),successCallback:{fn:function(e){Alfresco.util.PopupManager.displayMessage({text:b.msg("message.entitylist.state.change.success")})},scope:this}})});return a}});YAHOO.Bubbling.fire("registerToolbarButtonAction",{actionName:"export-csv",right:true,evaluate:function(b,a){return b.name!==null&&b.name.indexOf("WUsed")>-1},fn:function(a){var c=Alfresco.util.ComponentManager.find({name:"beCPG.module.EntityDataGrid"})[0];var b=5000;document.location.href=c._getDataUrl(b)+"&format=xls&metadata="+encodeURIComponent(YAHOO.lang.JSON.stringify(c._buildDataGridParams()))}})}})();