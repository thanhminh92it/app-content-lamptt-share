define(["dojo/_base/declare","alfresco/core/CoreXhr","dojo/_base/lang","dojo/_base/array","dojo/aspect","dijit/registry","alfresco/menus/AlfMenuGroup","alfresco/header/AlfMenuItem","alfresco/header/AlfCascadingMenu","dojo/dom-style"],function(g,k,e,i,c,d,j,f,b,h){return g([j,k],{entityNodeRef:null,pageUri:"",postCreate:function l(){this.inherited(arguments);this.alfLog("log","Loading recents");var n=this.entityNodeRef,m=Alfresco.constants.PROXY_URI+"becpg/dockbar";if(n!==null&&n.length>0){m+="?entityNodeRef="+n.replace(/\\/g,"")}this.serviceXhr({url:m,method:"GET",successCallback:this._menuDataLoaded,callbackScope:this})},_menuDataLoaded:function a(n,m){this.alfLog("log","Menu data loaded successfully",n);if(n.items&&n.items.length>0){for(var o=0;o<n.items.length;o++){var p=n.items[o];var q="entity-details?nodeRef="+p.nodeRef;if(this.pageUri.indexOf("entity-data-lists")){q="entity-data-lists?nodeRef="+p.nodeRef;if(p.itemType=="bcpg:finishedProduct"||p.itemType=="bcpg:semiFinishedProduct"){q+="&list=compoList"}else{if(p.itemType=="bcpg:packagingKit"){q+="&list=packagingList"}else{if(p.itemType=="pjt:project"){q+="&list=taskList"}}}}if(p.site){q="site/"+p.site.shortName+"/"+q}this.addChild(new f({label:p.displayName,iconClass:"entity "+p.itemType.split(":")[1],targetUrl:q}))}}}})});